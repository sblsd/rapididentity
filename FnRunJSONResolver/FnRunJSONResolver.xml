<actionDefs xmlns="urn:idauto.net:dss:actiondef"><actionDef changeCount="2527" modifiedMs="1686672393591" modifiedBy="02a918da-18b7-4b72-946b-ddceb1406b87" modifiedByName="luke_knowles@sumnersd.org" name="FnRunJSONResolver" category="" builtIn="false" community="false" returnsValue="true" description="SBLSD | Evaluates an LDAP record against rules defined through a JSON file to resolve a single value"><argDefs><argDef description="The LDAP record to evaluate" type="object" name="meta_record"/><argDef description="The full path to the JSON resolver file" type="string" name="resolver_file_path"/><argDef description="(Used internally for recursion, do not pass any value to this arg)" optional="true" type="object" name="resolver"/><argDef description="(Used internally for recursion, do not pass any value to this arg)" optional="true" type="string" name="meta_attribute_name"/></argDefs><actions><action id="6C0B386A-8792-4564-A639-0376A6633007" name="section"><arg name="do"><action id="47358446-0E1E-492A-96E6-A36F8C6C5BA5" name="if"><arg name="condition" value="resolver_file_path"/><arg name="then"><action id="AE9258B8-3F47-460E-B1DE-4F6EC3932C66" name="loadFileAsString" outputVar="resolver"><arg name="path" value="resolver_file_path"/></action><action id="4843A556-B1F3-42AF-BA0D-25EBA893391F" name="parseJSON" outputVar="resolver"><arg name="json" value="resolver"/></action></arg><arg name="else"/></action></arg></action><action id="E49ECCEC-64F5-4376-96FF-EE382686F9EA" name="section"><arg name="do"><action id="D1AC6676-5186-4E82-AAAA-D4E4FD3CF278" name="setVariable"><arg name="name" value="resolver_entries"/><arg name="value" value="Object.keys(resolver)"/></action><action id="C5258216-6CC6-428E-B088-701C3E5C3E87" name="setVariable"><arg name="name" value="result"/><arg name="value" value="null"/></action><action id="A21D9E97-F480-431A-8A46-FD89E7CB889A" name="forEach"><arg name="variable" value="resolver_entry"/><arg name="collection" value="resolver_entries"/><arg name="do"><action id="DDA7091F-C9AC-4973-BCC1-7FC53D1A244E" name="if"><arg name="condition" value="resolver_entry.startsWith(&quot;attr:&quot;)"/><arg name="then"><action id="84B84913-0C70-4A52-A1FD-59459025B441" name="comment"><arg name="comment" value="attribute filter"/></action><action id="2BF9D782-DB00-4CA5-ADE6-852C1C213BFA" name="stringReplaceAll" outputVar="attribute"><arg name="string" value="resolver_entry"/><arg name="pattern" value="&quot;attr:&quot;"/><arg name="replacement" value="&quot;&quot;"/></action><action id="1DF3D345-8AF7-4E08-8636-97F76ABFAC28" name="if"><arg name="condition" value="meta_record[attribute]"/><arg name="then"><action id="BDB85A41-E8F0-48AF-A007-45E3A57E495B" name="comment"><arg name="comment" value="meta user has attribute"/></action><action id="F588B471-A2DA-4035-AF9F-CA59B5D6CCA6" name="FnRunJSONResolver" outputVar="result"><arg name="meta_record" value="meta_record"/><arg name="resolver_file_path" value="undefined"/><arg name="resolver" value="resolver[resolver_entry]"/><arg name="meta_attribute_name" value="attribute"/></action><action id="3875A733-78EF-49C1-BD26-72BD189FAD5B" name="if"><arg name="condition" value="result != null"/><arg name="then"><action id="349BF1B8-6715-42C1-BDB1-CB651105F734" name="stringFromTemplate" outputVar="result"><arg name="format" value="result"/><arg name="args" value="meta_record"/></action><action id="C4DBD6E1-2E90-42F7-9F0C-C99F615AC4F3" name="return" disabled="false"><arg name="value" value="result"/></action></arg><arg name="else"/></action></arg><arg name="else"><action id="D5DBD642-DD4A-4FF3-9D4E-45B13495EBDE" name="comment"><arg name="comment" value="meta user does not have attribute"/></action></arg></action></arg><arg name="else"><action id="2B142B93-D1A7-4114-8597-5977DAFDD8E3" name="if"><arg name="condition" value="meta_record[meta_attribute_name] &amp;&amp; meta_record[meta_attribute_name] == resolver_entry"/><arg name="then"><action id="E876C216-595A-4DE0-83AD-74A7FDF06831" name="if"><arg name="condition" value="typeof resolver[resolver_entry] === &quot;object&quot;"/><arg name="then"><action id="64FB6ABD-2707-40C2-B79F-0ECB052CC5DF" name="FnRunJSONResolver" outputVar="result"><arg name="meta_record" value="meta_record"/><arg name="resolver_file_path" value="undefined"/><arg name="resolver" value="resolver[resolver_entry]"/></action><action id="60876046-F64C-4B21-A185-EE9E7AFD02CB" name="return" disabled="false"><arg name="value" value="result"/></action></arg><arg name="else"><action id="7A000247-CC8E-42E1-8FB5-F3B12A6E8764" name="return" disabled="false"><arg name="value" value="resolver[resolver_entry]"/></action></arg></action></arg><arg name="else"/></action></arg></action></arg></action></arg></action><action id="CC2FC833-B6EF-4E1F-ACAC-0EAC36B9AF3D" name="if"><arg name="condition" value="result != null"/><arg name="then"><action id="B5C86868-D0CA-4775-9366-D8F01EC54F44" name="stringFromTemplate" outputVar="result"><arg name="format" value="result"/><arg name="args" value="meta_record"/></action></arg><arg name="else"/></action><action id="89F83050-3E3C-44BA-A1C9-C1707B80012D" name="return"><arg name="value" value="result"/></action></actions></actionDef></actionDefs>